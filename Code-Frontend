
import controlP5.*;
import processing.serial.*;

ControlP5 cp5;

Serial serial; // создаем объект последовательного порта

PFont font;
PFont font2;        
PFont font3; 

PImage imgLogo;

String textValue = "";
String a;

void setup() {

  //Присваиваем переменной cp5 - значение библиотеки (для упрощенного вызова)
  cp5 = new ControlP5(this);

  //Создание шрифта
  font = createFont("calibri light bold", 20);
  font2 = createFont("Segoe UI Light", 28);
  font3 = createFont("Segoe UI Light", 12);

  //Присваиваем переменной изображение логотипа
  imgLogo = loadImage("logo.jpg");

  //Создание размеров экрана
  size(1280, 720);
  stroke(255);
  background(255, 255, 255);

  //Создание границ экрана
  fill(255);
  stroke(0, 64, 107);
  strokeWeight(10);
  rect(0, 0, 1280, 720);

  //Создание текста "Выберите форм-фактор"
  String s = "Выберите форм-фактор для начала работы";
  textFont(font);
  fill(50);
  text(s, 440, 120); 

  //Создание кнопки 'Пластина'
  cp5.addButton("Пластина")
    .setValue(0)
    .setPosition(180, 250)
    .setSize(320, 100)
    .setFont(font)
    .setId(1)
    ;

  //Создание кнопки 'Труба'
  cp5.addButton("Труба")
    .setValue(1)
    .setPosition(780, 250)
    .setSize(320, 100)
    .setFont(font)
    .setId(2)
    ;

  //Создание кнопки 'Вперед'
  cp5.addButton("Вперед")
    .setValue(1)
    .setPosition(180, 150)
    .setSize(320, 100)
    .setFont(font)
    .setId(3)
    .hide()
    ;

  //Создание кнопки 'Назад'
  cp5.addButton("Назад")
    .setValue(1)
    .setPosition(180, 350)
    .setSize(320, 100)
    .setFont(font)
    .setId(4)
    .hide()
    ;
    
  cp5.addButton("Вращать на 100мм")
   .setValue(1)
   .setPosition(550,200)
   .setSize(320,100)
   .setFont(font)
   .setId(11)
   .hide()
   ;  
    
  cp5.addButton("Вращать на 45°")
   .setValue(1)
   .setPosition(180,200)
   .setSize(320,100)
   .setFont(font)
   .setId(10)
   .hide()
 ;

  //Создание кнопки 'Вращать на 90'
  cp5.addButton("Вращать на 90°")
    .setValue(1)
    .setPosition(180, 350)
    .setSize(320, 100)
    .setFont(font)
    .setId(6)
    .hide()
    ;
  //Создание кнопки 'Вращать на 180'
  cp5.addButton("Вращать на 180°")
    .setValue(1)
    .setPosition(180, 500)
    .setSize(320, 100)
    .setFont(font)
    .setId(7)
    .hide()
    ;

  //Создание кнопки "X"
  cp5.addButton("Х")
    .setValue(1)
    .setPosition(1222, 8)
    .setSize(50, 50)
    .setFont(font)
    .setId(5)
    .hide()
    ;

  ///Создание кнопки ручного управления ШВП ">"/////
  cp5.addButton(">")
    .setValue(1)
    .setPosition(78, 655)
    .setSize(50, 50)                                                                //ШВП >>>>>>>>>>>>>>>>>>>>>>>>
    .setFont(font)
    .setId(8)
    .hide()
    ;
  ///////////////////////////////////////////////////
  //
  ///Создание кнопки ручного управления ШВП "<"/////
  cp5.addButton("<")
    .setValue(1)
    .setPosition(18, 655)
    .setSize(50, 50)                                                                //ШВП <<<<<<<<<<<<<<<<<<<<<<<<
    .setFont(font)
    .setId(9)
    .hide()
    ;
  //////////////////////////////////////////////////

  //РИСУЕМ ПОЛЕ ВВОДА
  cp5.addTextfield("1-159")
    .setPosition(420, 93)
    .setSize(100, 40)
    .setFont(font2)
    .setAutoClear(false)
    .hide()
    ;

  //Рисуем изображение логотипа
  image(imgLogo, 995, 590, imgLogo.width/4, imgLogo.height/4);

  String port = Serial.list()[0];
  serial = new Serial(this, port, 9600);
}

void draw() {
}

void controlEvent(ControlEvent theEvent) {
  println(+theEvent.getController().getId());
  switch(theEvent.getController().getId()) {
    //---
    //---    
    //---    
    //---    
    //---
    case(1)://КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА//КНОПКА ПЛАСТИНА

    clear();

    cp5.getController("Пластина").hide();
    cp5.getController("Труба").hide();
    cp5.getController("1-159").hide();

    //Создание границ экрана
    fill(255);
    stroke(0, 64, 107);
    strokeWeight(10);
    rect(0, 0, 1280, 720);

    //Рисуем изображение логотипа
    image(imgLogo, 995, 590, imgLogo.width/4, imgLogo.height/4);

    cp5.getController("Вперед").show();
    cp5.getController("Назад").show();
    cp5.getController("Х").show();
    cp5.getController(">").show();
    cp5.getController("<").show();

    serial.write(1);

    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---
    //---
    //---
    //---
    //---
    case(2)://КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//КНОПКА ТРУБА//

    clear();

    cp5.getController("Пластина").hide();
    cp5.getController("Труба").hide();

    //Создание границ экрана
    fill(255);
    stroke(0, 64, 107);
    strokeWeight(10);
    rect(0, 0, 1280, 720);

    //Рисуем изображение логотипа
    image(imgLogo, 995, 590, imgLogo.width/4, imgLogo.height/4);

    String s2 = "Введите диаметр трубы: ";
    textFont(font);
    fill(50);
    text(s2, 180, 120); 

    String s3 = "Значения от 1-200";
    textFont(font3);
    fill(50);
    text(s3, 420, 150); 

    cp5.getController("Х").show();
    cp5.getController("Вращать на 100мм").show();
    cp5.getController("Вращать на 45°").show();
    cp5.getController("Вращать на 90°").show();
    cp5.getController("Вращать на 180°").show();
    cp5.getController("1-159").show();
    cp5.getController(">").show();
    cp5.getController("<").show();

    serial.write(2);

    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---
    //---
    //---
    //---
    //---    
    case(3)://КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД//КНОПКА ВПЕРЕД


    serial.write(1);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---    
    //---
    //---
    //---
    //---
    case(4)://КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД//КНОПКА НАЗАД


    serial.write(2);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---
    //---
    //---
    //---
    //---
    case(6)://КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90//КНОПКА ВРАЩАТЬ НА 90


    serial.write(2);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---
    //---
    //---
    //---
    //---
    case(7)://КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180//КНОПКА ВРАЩАТЬ НА 180


    serial.write(1);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---
    //---
    //---
    //---
    //---
    case(5)://КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х//КНОПКА Х

    clear();

    cp5.getController("Вперед").hide();
    cp5.getController("Назад").hide();
    cp5.getController("Х").hide();
    cp5.getController("Вращать на 100мм").hide();
    cp5.getController("Вращать на 45°").hide();
    cp5.getController("Вращать на 90°").hide();
    cp5.getController("Вращать на 180°").hide();
    cp5.getController("1-159").hide();
    cp5.getController(">").hide();
    cp5.getController("<").hide();


    //Создание границ экрана
    fill(255);
    stroke(0, 64, 107);
    strokeWeight(10);
    rect(0, 0, 1280, 720);

    //Создание текста "Выберите форм-фактор"
    String s = "Выберите форм-фактор для начала работы";
    textFont(font);
    fill(50);
    text(s, 440, 120); 

    //Рисуем изображение логотипа
    image(imgLogo, 995, 590, imgLogo.width/4, imgLogo.height/4);

    cp5.getController("Пластина").show();
    cp5.getController("Труба").show();

    serial.write(5);

    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---  
    //---  
    //---  
    //---  
    //---  
    case(8)://КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >//КНОПКА >


    serial.write(3);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---
    //---  
    //---  
    //---  
    //---  
    case(9)://КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <//КНОПКА <


    serial.write(4);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---  
    //---  
    //---  
    //---  
    //---
    case(10)://КНОПКА 45////КНОПКА 45////КНОПКА 45////КНОПКА 45////КНОПКА 45////КНОПКА 45//


    serial.write(6);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //---  
    //---  
    //---  
    //---  
    //---
    case(11)://КНОПКА ВРАЩАТЬ НА 100ММ


    serial.write(7);


    break;/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  }

  if (theEvent.isAssignableFrom(Textfield.class)) {
    a = theEvent.getStringValue();
    int b = int(theEvent.getStringValue());
    delay(1000);
    println(b);
    serial.write(b);
    delay(500);
  }
}
